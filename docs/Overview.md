# Project Overview: Ask Salmiakki

## 1. High-Level Summary

**Ask Salmiakki** is a full-stack, AI-powered Q&A platform designed to provide the salty, unvarnished truth about the Finnish tech and startup ecosystem. This project is an end-to-end demonstration of a modern MLOps workflow, from automated data ingestion to a user-facing RAG (Retrieval-Augmented Generation) application.

The system features a production-grade backend with automated data pipelines, a custom-built embedding strategy, and a comprehensive monitoring stack, showcasing the full lifecycle of a machine learning application.

## 2. Core Features

*   **Automated Data Ingestion**: A daily pipeline, orchestrated by **Apache Airflow**, automatically fetches and processes the latest news from public sources.
*   **Natural Language Q&A**: Users can ask complex questions in plain English (or Finnish) and receive summarized, context-aware answers generated by **Google's Gemini Pro**.
*   **Custom RAG Pipeline**: The core of the AI is a custom RAG system that uses a lightweight, self-implemented **hashing vectorizer** for embeddings and **pgvector** for efficient similarity search, ensuring answers are based solely on the collected news articles.
*   **Analytical Dashboard**: A **Streamlit** dashboard provides a high-level, visual analysis of the collected data, showing trends and source breakdowns.
*   **Performance Monitoring**: The entire system's health, from API latency to pipeline success rates, is monitored in real-time using **Prometheus** and visualized in **Grafana**.

## 3. System Architecture

The diagram below illustrates the flow of data and user requests through the various services of our application, from data ingestion to the final user interaction.

```mermaid
graph TD
    %% Define Node Styles
    style User fill:#f9f,stroke:#333,stroke-width:2px
    style Nginx fill:#9f9,stroke:#333,stroke-width:2px
    style Airflow fill:#ff9,stroke:#333,stroke-width:2px
    style Grafana fill:#ff9,stroke:#333,stroke-width:2px
    style GoogleAI fill:#87CEFA,stroke:#333,stroke-width:2px

    %% Subgraph for User Facing Services
    subgraph User Facing Services
        User["<br/>ðŸ‘¤<br/>End User"]
        subgraph Browser
            Frontend["React Frontend<br/>(Q&A App)"]
            Dashboard["Streamlit Dashboard<br/>(Analytics)"]
        end
    end

    %% Subgraph for Core API & Data Store
    subgraph Core API & Data Store
        Nginx["Nginx<br/>(Reverse Proxy)"]
        FastAPI["FastAPI Backend<br/>(api_backend)"]
        Postgres["PostgreSQL DB<br/>(pgvector)"]
        GoogleAI["Google AI Platform<br/>(Gemini Pro)"]
    end
    
    %% Subgraph for MLoPS & Data Processing
    subgraph MLOps & Data Processing
        Airflow["Apache Airflow<br/>(Orchestrator)"]
        PipelineContainer["Data Pipeline Container<br/>(data_pipeline)"]
        Websites["External Websites<br/>(RSS Feeds)"]
    end

    %% Subgraph for Monitoring & Observability
    subgraph Monitoring & Observability
        Prometheus["Prometheus<br/>(Metrics Collector)"]
        Grafana["Grafana<br/>(Dashboards)"]
    end

    %% User Request Flow
    User --> Browser
    Browser -- "HTTP Requests" --> Nginx
    Nginx --> FastAPI & Frontend & Dashboard
    FastAPI -- "Similarity Search (SQL)" --> Postgres
    FastAPI -- "Augmented Prompt" --> GoogleAI
    GoogleAI --> FastAPI
    Dashboard -- "SQL for Visuals" --> Postgres

    %% Data Ingestion Flow
    Airflow -. "Triggers Run" .-> PipelineContainer
    PipelineContainer -. "Fetches Data" .-> Websites
    PipelineContainer -. "Stores Articles & Embeddings" .-> Postgres

    %% Monitoring Flow
    FastAPI -->|Exposes /metrics| Prometheus
    Airflow -->|Exposes Metrics| Prometheus
    Prometheus -->|Data Source| Grafana
    User -->|Views Dashboards| Grafana
    
    %% Link Styles
    linkStyle 12 stroke:#888,stroke-width:2px,stroke-dasharray: 3 3
    linkStyle 13 stroke:#888,stroke-width:2px,stroke-dasharray: 3 3
    linkStyle 14 stroke:#888,stroke-width:2px,stroke-dasharray: 3 3
    linkStyle 15 stroke:#888,stroke-width:2px,stroke-dasharray: 3 3


